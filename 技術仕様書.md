# è»Œé“å¾©å…ƒã‚·ã‚¹ãƒ†ãƒ  æŠ€è¡“ä»•æ§˜æ›¸

ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0.0 (Phase 15 å®Œäº†)
æœ€çµ‚æ›´æ–°: 2025å¹´

---

## ğŸ“‘ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#1-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#2-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [åå¿ƒçŸ¢è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](#3-åå¿ƒçŸ¢è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )
4. [æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°è¨ˆç®—](#4-æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°è¨ˆç®—)
5. [åå¿ƒçŸ¢å¤‰æ›ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](#5-åå¿ƒçŸ¢å¤‰æ›ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )
6. [ãƒ‡ãƒ¼ã‚¿å‡¦ç†ä»•æ§˜](#6-ãƒ‡ãƒ¼ã‚¿å‡¦ç†ä»•æ§˜)
7. [APIä»•æ§˜è©³ç´°](#7-apiä»•æ§˜è©³ç´°)
8. [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä»•æ§˜](#8-ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä»•æ§˜)
9. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜](#9-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜)
10. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜](#10-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜)
11. [ãƒ†ã‚¹ãƒˆä»•æ§˜](#11-ãƒ†ã‚¹ãƒˆä»•æ§˜)
12. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ](#12-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 1.1 ç›®çš„

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€é‰„é“è»Œé“ã®æ¤œæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã€åå¿ƒçŸ¢è¨ˆç®—ã¨è»Œé“å¾©å…ƒã‚’è¡Œã†WEBã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚Visual Basic 6ã§å®Ÿè£…ã•ã‚Œã¦ã„ãŸãƒ¬ã‚¬ã‚·ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆKCDWã€KANA3ã€DCPZWç­‰ï¼‰ã‚’ãƒ¢ãƒ€ãƒ³ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§å†å®Ÿè£…ã—ã¾ã—ãŸã€‚

### 1.2 ä¸»è¦æ©Ÿèƒ½

#### ãƒ‡ãƒ¼ã‚¿å‡¦ç†æ©Ÿèƒ½
- RSQãƒ•ã‚¡ã‚¤ãƒ«è§£æï¼ˆè»Œé“æ¤œæ¸¬ãƒ‡ãƒ¼ã‚¿ï¼‰
- ã‚­ãƒ¤ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆè»Šä¸¡ãƒ‡ãƒ¼ã‚¿çµ±åˆï¼‰
- è»Œé“ç’°å¢ƒãƒ‡ãƒ¼ã‚¿å‡¦ç†
- CSVå½¢å¼ãƒ‡ãƒ¼ã‚¿å‡¦ç†

#### è»Œé“æ³¢å½¢è§£æ
- è»Œé“æ³¢å½¢ãƒ‡ãƒ¼ã‚¿ã®ã‚°ãƒ©ãƒ•è¡¨ç¤º
- çµ±è¨ˆæƒ…å ±ã®è¨ˆç®—
- ç›¸é–¢ä¿‚æ•°è¨ˆç®—
- æ³¢å½¢å¾©å…ƒå‡¦ç†

#### åå¿ƒçŸ¢è¨ˆç®—ï¼ˆPhase 12-14ã§å®Ÿè£…ï¼‰
- éå¯¾ç§°å¼¦é•·å¯¾å¿œï¼ˆp â‰  qï¼‰
- æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°è¨ˆç®—ï¼ˆæŒ¯å¹…ãƒ»ä½ç›¸ç‰¹æ€§ï¼‰
- åå¿ƒçŸ¢å¤‰æ›ï¼ˆç•°ãªã‚‹æ¤œæ¸¬ç‰¹æ€§é–“ã®å¤‰æ›ï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ³¢é•·ç‰¹æ€§å¯è¦–åŒ–

### 1.3 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **è¨€èª**: JavaScript (Node.js 18+)
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Express.js 4.x
- **ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
  - multer 1.4.5: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
  - cors 2.8.5: ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **è¨€èª**: TypeScript 5.x
- **UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: React 18.x
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite 5.x
- **å¯è¦–åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
  - Plotly.js: é«˜æ€§èƒ½ã‚°ãƒ©ãƒ•æç”»ï¼ˆåå¿ƒçŸ¢æ©Ÿèƒ½ã§ä½¿ç”¨ï¼‰
  - Chart.js: åŸºæœ¬ãƒãƒ£ãƒ¼ãƒˆ
  - react-plotly.js: Reactãƒ©ãƒƒãƒ‘ãƒ¼
  - react-chartjs-2: Reactãƒ©ãƒƒãƒ‘ãƒ¼

### 1.4 ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

**æœ€å°è¦ä»¶:**
- Node.js 18.0ä»¥ä¸Š
- RAM: 4GBä»¥ä¸Š
- ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡: 500MBä»¥ä¸Š

**æ¨å¥¨è¦ä»¶:**
- Node.js 20.0ä»¥ä¸Š
- RAM: 8GBä»¥ä¸Š
- ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡: 1GBä»¥ä¸Š
- SSDæ¨å¥¨

---

## 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client (Browser)                          â”‚
â”‚                       Port: 3000                             â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   React UI   â”‚  â”‚   Plotly.js  â”‚  â”‚   Chart.js   â”‚      â”‚
â”‚  â”‚  Components  â”‚  â”‚   Charting   â”‚  â”‚   Charting   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                            â”‚                                  â”‚
â”‚                            â”‚ HTTP/HTTPS (REST API)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Express.js API Server                          â”‚
â”‚                    Port: 5000                                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               API Routes Layer                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ Eccentric  â”‚  â”‚    Kiya    â”‚  â”‚   Track    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚  Versine   â”‚  â”‚    Data    â”‚  â”‚Environment â”‚      â”‚  â”‚
â”‚  â”‚  â”‚  Routes    â”‚  â”‚   Routes   â”‚  â”‚   Routes   â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Business Logic Layer                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ Algorithms â”‚  â”‚  Parsers   â”‚  â”‚   Utils    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Eccentricâ”‚  â”‚ â€¢ RSQ      â”‚  â”‚ â€¢ Logger   â”‚      â”‚  â”‚
â”‚  â”‚  â”‚   Versine  â”‚  â”‚ â€¢ Kiya     â”‚  â”‚            â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Correl.  â”‚  â”‚ â€¢ Track    â”‚  â”‚            â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Waveform â”‚  â”‚   Env.     â”‚  â”‚            â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ è©³ç´°

```
rail-track-app/
â”œâ”€â”€ backend/                           # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js                 # ãƒ¬ã‚¬ã‚·ãƒ¼ã‚µãƒ¼ãƒãƒ¼ (Port: 3001)
â”‚   â”‚   â”œâ”€â”€ api-server.js             # ãƒ¡ã‚¤ãƒ³APIã‚µãƒ¼ãƒãƒ¼ (Port: 5000)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ algorithms/               # è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ correlation.js        # ç›¸é–¢ä¿‚æ•°è¨ˆç®—
â”‚   â”‚   â”‚   â”œâ”€â”€ waveform-restoration.js  # æ³¢å½¢å¾©å…ƒ
â”‚   â”‚   â”‚   â””â”€â”€ eccentric-versine.js  # åå¿ƒçŸ¢è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³ (394è¡Œ)
â”‚   â”‚   â”‚                              #   - éå¯¾ç§°å¼¦é•·å¯¾å¿œ
â”‚   â”‚   â”‚                              #   - æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°è¨ˆç®—
â”‚   â”‚   â”‚                              #   - åå¿ƒçŸ¢å¤‰æ›
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ parsers/                  # ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ¼ã‚µãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ rsq-parser.js         # RSQãƒ•ã‚¡ã‚¤ãƒ«è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ kiya-parser.js        # ã‚­ãƒ¤ãƒ‡ãƒ¼ã‚¿è§£æ
â”‚   â”‚   â”‚   â””â”€â”€ track-environment-parser.js  # è»Œé“ç’°å¢ƒãƒ‡ãƒ¼ã‚¿è§£æ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/                   # APIãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ eccentric-versine-routes.js  # åå¿ƒçŸ¢API (425è¡Œ)
â”‚   â”‚   â”‚   â”‚                          #   - 8å€‹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ kiya-routes.js        # ã‚­ãƒ¤ãƒ‡ãƒ¼ã‚¿API
â”‚   â”‚   â”‚   â””â”€â”€ track-environment-routes.js  # è»Œé“ç’°å¢ƒAPI
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚       â””â”€â”€ logger.js             # ãƒ­ã‚®ãƒ³ã‚°
â”‚   â”‚
â”‚   â”œâ”€â”€ uploads/                      # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ™‚ä¿å­˜
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ frontend/                         # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/              # å†åˆ©ç”¨å¯èƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUpload.tsx       # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ ChartDisplay.tsx     # Chart.jsè¡¨ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ Statistics.tsx       # çµ±è¨ˆæƒ…å ±è¡¨ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ EccentricVersineChart.tsx      # åå¿ƒçŸ¢æ³¢å½¢ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ CharacteristicsChart.tsx       # æ¤œæ¸¬ç‰¹æ€§ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ ConversionComparisonChart.tsx  # å¤‰æ›æ¯”è¼ƒãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/                   # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ EccentricVersinePage.tsx       # åå¿ƒçŸ¢è¨ˆç®—ãƒšãƒ¼ã‚¸ (866è¡Œ)
â”‚   â”‚   â”‚   â”‚                          #   - 5ã¤ã®ã‚¿ãƒ–æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”‚                          #   - å®Œå…¨ãªUIå®Ÿè£…
â”‚   â”‚   â”‚   â””â”€â”€ EccentricVersinePage.css       # ã‚¹ã‚¿ã‚¤ãƒ« (635è¡Œ)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.tsx                  # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ App.css                  # ã‚¢ãƒ—ãƒªã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ main.tsx                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ index.css                # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”‚
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ vite.config.ts               # Viteè¨­å®š
â”‚   â”œâ”€â”€ tsconfig.json                # TypeScriptè¨­å®š
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ test-data/                       # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ sample-data.csv
â”‚   â”œâ”€â”€ test-rsq.rsq
â”‚   â””â”€â”€ kiya-sample/
â”‚
â”œâ”€â”€ sample-data.csv                  # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ README.md                        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ åˆå¿ƒè€…å‘ã‘ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰.md        # åˆå¿ƒè€…ã‚¬ã‚¤ãƒ‰
â””â”€â”€ æŠ€è¡“ä»•æ§˜æ›¸.md                    # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

---

## 3. åå¿ƒçŸ¢è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### 3.1 ç†è«–çš„èƒŒæ™¯

åå¿ƒçŸ¢ï¼ˆEccentric Versineï¼‰ã¯ã€è»Œé“ã®æ›²ç·šã‚’å®šé‡çš„ã«è©•ä¾¡ã™ã‚‹ãŸã‚ã®æŒ‡æ¨™ã§ã™ã€‚æ¸¬å®šç‚¹ã«ãŠã‘ã‚‹è»Œé“å¤‰ä½ã‹ã‚‰ã€å‰å¾Œã®åŸºæº–å¼¦é•·ã§å®šç¾©ã•ã‚Œã‚‹ç›´ç·šã‹ã‚‰ã®ã‚ºãƒ¬é‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚

### 3.2 åŸºæœ¬è¨ˆç®—å¼

**éå¯¾ç§°å¼¦é•·ã®åå¿ƒçŸ¢è¨ˆç®—å¼:**

```
y[n] = x[n] - (1/(p+q)) Ã— (pÃ—x[n-q/Ï„] + qÃ—x[n+p/Ï„])
```

**è¨˜å·ã®å®šç¾©:**
- `x[n]`: nç•ªç›®ã®æ¸¬å®šç‚¹ã«ãŠã‘ã‚‹è»Œé“å¤‰ä½ [mm]
- `y[n]`: nç•ªç›®ã®æ¸¬å®šç‚¹ã«ãŠã‘ã‚‹åå¿ƒçŸ¢ [mm]
- `p`: å‰æ–¹å¼¦é•· [m]
- `q`: å¾Œæ–¹å¼¦é•· [m]
- `Ï„`: ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°é–“éš” [m]
- `n`: æ¸¬å®šç‚¹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

### 3.3 å®Ÿè£…è©³ç´°

#### 3.3.1 ã‚¯ãƒ©ã‚¹æ§‹é€ 

```javascript
class EccentricVersine {
  constructor({ samplingInterval = 0.25 }) {
    this.samplingInterval = samplingInterval;
  }

  calculate(measurementData, p, q) { /* ... */ }
  calculateCharacteristics(p, q, wavelengthRange) { /* ... */ }
  convertVersine(sourceData, sourceParams, targetParams) { /* ... */ }
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:** `backend/src/algorithms/eccentric-versine.js` (394è¡Œ)

#### 3.3.2 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨ˆç®—

```javascript
// å¾Œæ–¹å‚ç…§ç‚¹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
const leftIndex = i - Math.round(q / this.samplingInterval);

// å‰æ–¹å‚ç…§ç‚¹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
const rightIndex = i + Math.round(p / this.samplingInterval);
```

#### 3.3.3 å¢ƒç•Œå‡¦ç†

é…åˆ—ã®å¢ƒç•Œã‚’è¶…ãˆã‚‹å ´åˆã®å‡¦ç†:

```javascript
if (leftIndex < 0 || rightIndex >= n) {
  versine[i] = null;  // è¨ˆç®—ä¸å¯é ˜åŸŸ
  continue;
}
```

**è¨ˆç®—å¯èƒ½ç¯„å›²:**
- é–‹å§‹ç‚¹: `n_start = ceil(q/Ï„)`
- çµ‚äº†ç‚¹: `n_end = N - ceil(p/Ï„) - 1`
- where `N` ã¯ç·æ¸¬å®šç‚¹æ•°

#### 3.3.4 åŠ é‡å¹³å‡è¨ˆç®—

```javascript
const weightedAvg = (p * signal[leftIndex] + q * signal[rightIndex]) / (p + q);
versine[i] = signal[i] - weightedAvg;
```

### 3.4 è¨ˆç®—é‡è§£æ

**æ™‚é–“è¨ˆç®—é‡**: O(n)
- nã¯æ¸¬å®šç‚¹æ•°
- å„ç‚¹ã§å®šæ•°æ™‚é–“ã®æ¼”ç®—ã®ã¿

**ç©ºé–“è¨ˆç®—é‡**: O(n)
- å…¥åŠ›é…åˆ—: nè¦ç´ 
- å‡ºåŠ›é…åˆ—: nè¦ç´ 
- è£œåŠ©é…åˆ—: ãªã—

### 3.5 æ•°å€¤ç²¾åº¦

**æµ®å‹•å°æ•°ç‚¹æ¼”ç®—:**
- JavaScriptæ¨™æº–ã®Numberå‹ï¼ˆIEEE 754 å€ç²¾åº¦æµ®å‹•å°æ•°ç‚¹ï¼‰
- æœ‰åŠ¹æ¡æ•°: ç´„15-17æ¡
- ç²¾åº¦: æ¸¬å®šå€¤ã®æœ‰åŠ¹æ¡æ•°ä»¥å†…ã§ååˆ†ãªç²¾åº¦ã‚’ä¿è¨¼

**ä¸¸ã‚èª¤å·®å¯¾ç­–:**
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨ˆç®—ã§Math.round()ã‚’ä½¿ç”¨
- ç´¯ç©èª¤å·®ã®å½±éŸ¿ã¯å¾®å°ï¼ˆæ¸¬å®šç²¾åº¦0.1mmä»¥ä¸‹ï¼‰

### 3.6 ä½¿ç”¨ä¾‹

```javascript
const calculator = new EccentricVersine({ samplingInterval: 0.25 });

const measurementData = [
  { distance: 0, value: 1.5 },
  { distance: 0.25, value: 1.8 },
  { distance: 0.5, value: 2.1 },
  // ...
];

const result = calculator.calculate(measurementData, 10, 5);
console.log(result.versineData);  // åå¿ƒçŸ¢ãƒ‡ãƒ¼ã‚¿
console.log(result.statistics);   // çµ±è¨ˆæƒ…å ±
```

---

## 4. æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°è¨ˆç®—

### 4.1 ç†è«–å¼

#### 4.1.1 è§’å‘¨æ³¢æ•°

```
Ï‰ = 2Ï€/Î»
```

where `Î»` ã¯æ³¢é•· [m]

#### 4.1.2 æŒ¯å¹…ä¿‚æ•°A

```
A(Î») = 1 - (pÃ—cos(Ï‰q) + qÃ—cos(Ï‰p))/(p+q)
```

#### 4.1.3 ä½ç›¸ä¿‚æ•°B

```
B(Î») = (-pÃ—sin(Ï‰q) + qÃ—sin(Ï‰p))/(p+q)
```

#### 4.1.4 æŒ¯å¹…ç‰¹æ€§

```
|H(Î»)| = âˆš(AÂ² + BÂ²)
```

#### 4.1.5 ä½ç›¸ç‰¹æ€§

```
Î¸(Î») = arctan2(B, A)  [rad]
Î¸_deg(Î») = Î¸(Î») Ã— 180/Ï€  [deg]
```

### 4.2 å®Ÿè£…ã‚³ãƒ¼ãƒ‰

```javascript
calculateCharacteristics(p, q, wavelengthRange = { min: 1, max: 200, step: 1 }) {
  const { min, max, step } = wavelengthRange;
  const results = [];

  for (let lambda = min; lambda <= max; lambda += step) {
    const omega = (2 * Math.PI) / lambda;

    // Aä¿‚æ•°
    const A = 1 - (p * Math.cos(omega * q) + q * Math.cos(omega * p)) / (p + q);

    // Bä¿‚æ•°
    const B = (-p * Math.sin(omega * q) + q * Math.sin(omega * p)) / (p + q);

    // æŒ¯å¹…
    const amplitude = Math.sqrt(A * A + B * B);

    // ä½ç›¸ï¼ˆãƒ©ã‚¸ã‚¢ãƒ³ï¼‰
    const phase = Math.atan2(B, A);

    // ä½ç›¸ï¼ˆåº¦ï¼‰
    const phaseDeg = phase * 180 / Math.PI;

    results.push({
      wavelength: lambda,
      A,
      B,
      amplitude,
      phase,
      phaseDeg
    });
  }

  return results;
}
```

### 4.3 ç‰¹æ€§ã®è§£é‡ˆ

#### 4.3.1 æŒ¯å¹…ç‰¹æ€§

- **|H| â‰ˆ 1.0**: ãã®æ³¢é•·æˆåˆ†ã‚’å®Œå…¨ã«æ¤œå‡º
- **|H| â‰ˆ 0.5**: ãã®æ³¢é•·æˆåˆ†ã‚’50%æ¤œå‡º
- **|H| â‰ˆ 0.0**: ãã®æ³¢é•·æˆåˆ†ã‚’ã»ã¨ã‚“ã©æ¤œå‡ºã—ãªã„

#### 4.3.2 ä½ç›¸ç‰¹æ€§

- **Î¸ = 0Â°**: ä½ç›¸ãšã‚Œãªã—
- **Î¸ = Â±90Â°**: 90åº¦ä½ç›¸ãšã‚Œ
- **Î¸ = Â±180Â°**: é€†ä½ç›¸

### 4.4 ä»£è¡¨çš„ãªç‰¹æ€§å€¤

#### å¯¾ç§°å¼¦é•· (p = q = 5m, Ï„ = 0.25m)

| æ³¢é•· Î» [m] | æŒ¯å¹… \|H\| | ä½ç›¸ Î¸ [deg] |
|-----------|-----------|-------------|
| 5         | 0.000     | -           |
| 10        | 0.637     | 0.0         |
| 20        | 0.950     | 0.0         |
| 50        | 0.998     | 0.0         |
| 100       | 1.000     | 0.0         |

#### éå¯¾ç§°å¼¦é•· (p = 10m, q = 5m, Ï„ = 0.25m)

| æ³¢é•· Î» [m] | æŒ¯å¹… \|H\| | ä½ç›¸ Î¸ [deg] |
|-----------|-----------|-------------|
| 10        | 0.000     | -           |
| 15        | 0.500     | -30.0       |
| 20        | 0.746     | -22.5       |
| 50        | 0.982     | -9.0        |
| 100       | 0.996     | -4.5        |

---

## 5. åå¿ƒçŸ¢å¤‰æ›ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### 5.1 ç†è«–

ç•°ãªã‚‹æ¤œæ¸¬ç‰¹æ€§ã§æ¸¬å®šã•ã‚ŒãŸåå¿ƒçŸ¢ã‚’åˆ¥ã®æ¤œæ¸¬ç‰¹æ€§ã®åå¿ƒçŸ¢ã«å¤‰æ›ã™ã‚‹æ‰‹æ³•ã€‚

### 5.2 å¤‰æ›ä¿‚æ•°ã®å°å‡º

#### 5.2.1 å¤‰æ›ä¿‚æ•°Î±

```
Î±(Î») = (Aâ‚Ã—Aâ‚‚ + Bâ‚Ã—Bâ‚‚) / (Aâ‚Â² + Bâ‚Â²)
```

#### 5.2.2 å¤‰æ›ä¿‚æ•°Î²

```
Î²(Î») = (Aâ‚Ã—Bâ‚‚ - Aâ‚‚Ã—Bâ‚) / (Aâ‚Â² + Bâ‚Â²)
```

where:
- `Aâ‚, Bâ‚`: å¤‰æ›å…ƒã®æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°
- `Aâ‚‚, Bâ‚‚`: å¤‰æ›å…ˆã®æ¤œæ¸¬ç‰¹æ€§ä¿‚æ•°

### 5.3 å¤‰æ›å¼

```
yâ‚‚[n] = Î±Ã—yâ‚[n] + Î²Ã—yâ‚'[n]
```

where:
- `yâ‚[n]`: å¤‰æ›å…ƒåå¿ƒçŸ¢
- `yâ‚‚[n]`: å¤‰æ›å¾Œåå¿ƒçŸ¢
- `yâ‚'[n]`: å¤‰æ›å…ƒåå¿ƒçŸ¢ã®1æ¬¡å¾®åˆ†ï¼ˆå·®åˆ†è¿‘ä¼¼ï¼‰

### 5.4 å¾®åˆ†è¿‘ä¼¼ã®å®Ÿè£…

**ä¸­å¤®å·®åˆ†æ³•:**
```
yâ‚'[n] = (yâ‚[n+1] - yâ‚[n-1]) / (2Ã—Ï„)
```

**å¢ƒç•Œå‡¦ç†:**
```
yâ‚'[0] = (yâ‚[1] - yâ‚[0]) / Ï„           // å‰é€²å·®åˆ†
yâ‚'[N-1] = (yâ‚[N-1] - yâ‚[N-2]) / Ï„     // å¾Œé€€å·®åˆ†
```

### 5.5 å®Ÿè£…ä¾‹

```javascript
convertVersine(sourceData, sourceParams, targetParams, samplingInterval) {
  const { p: p1, q: q1 } = sourceParams;
  const { p: p2, q: q2 } = targetParams;

  // ä»£è¡¨æ³¢é•·ã§ã®å¤‰æ›ä¿‚æ•°ã‚’è¨ˆç®—
  const wavelength = 20; // ä»£è¡¨æ³¢é•·20m
  const omega = 2 * Math.PI / wavelength;

  // å¤‰æ›å…ƒç‰¹æ€§
  const A1 = this.calculateA(p1, q1, omega);
  const B1 = this.calculateB(p1, q1, omega);

  // å¤‰æ›å…ˆç‰¹æ€§
  const A2 = this.calculateA(p2, q2, omega);
  const B2 = this.calculateB(p2, q2, omega);

  // å¤‰æ›ä¿‚æ•°
  const denominator = A1 * A1 + B1 * B1;
  const alpha = (A1 * A2 + B1 * B2) / denominator;
  const beta = (A1 * B2 - A2 * B1) / denominator;

  // å¤‰æ›å®Ÿè¡Œ
  const converted = [];
  for (let i = 0; i < sourceData.length; i++) {
    let derivative;

    if (i === 0) {
      // å‰é€²å·®åˆ†
      derivative = (sourceData[1].value - sourceData[0].value) / samplingInterval;
    } else if (i === sourceData.length - 1) {
      // å¾Œé€€å·®åˆ†
      derivative = (sourceData[i].value - sourceData[i-1].value) / samplingInterval;
    } else {
      // ä¸­å¤®å·®åˆ†
      derivative = (sourceData[i+1].value - sourceData[i-1].value) / (2 * samplingInterval);
    }

    const convertedValue = alpha * sourceData[i].value + beta * derivative;
    converted.push({
      distance: sourceData[i].distance,
      value: convertedValue
    });
  }

  return {
    convertedData: converted,
    conversionCoefficients: { alpha, beta }
  };
}
```

---

## 6. ãƒ‡ãƒ¼ã‚¿å‡¦ç†ä»•æ§˜

### 6.1 RSQãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

#### 6.1.1 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
[ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨]  (32ãƒã‚¤ãƒˆ)
- ãƒ•ã‚¡ã‚¤ãƒ«è­˜åˆ¥å­: 4ãƒã‚¤ãƒˆ ("RSQ\0")
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2ãƒã‚¤ãƒˆ (uint16)
- äºˆç´„é ˜åŸŸ: 2ãƒã‚¤ãƒˆ
- æ¸¬å®šæ—¥æ™‚: 8ãƒã‚¤ãƒˆ (UNIX timestamp)
- ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°é–“éš”: 4ãƒã‚¤ãƒˆ (float)
- ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°: 4ãƒã‚¤ãƒˆ (uint32)
- äºˆç´„é ˜åŸŸ: 8ãƒã‚¤ãƒˆ

[ãƒ‡ãƒ¼ã‚¿éƒ¨]
- å„æ¸¬å®šç‚¹: 8ãƒã‚¤ãƒˆ
  - è·é›¢: 4ãƒã‚¤ãƒˆ (float) [m]
  - å€¤: 4ãƒã‚¤ãƒˆ (float) [mm]
```

#### 6.1.2 ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³

- ãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³å½¢å¼

#### 6.1.3 è§£æå®Ÿè£…

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:** `backend/src/parsers/rsq-parser.js`

### 6.2 ã‚­ãƒ¤ãƒ‡ãƒ¼ã‚¿å½¢å¼

#### 6.2.1 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ†å‰²å½¢å¼:

```
[HEADER]
DATE=2024-01-15
TIME=14:30:00
INTERVAL=0.25
CAR=KIYA95

[DATA]
distance,left,right,gauge,cant
0.00,1.5,1.2,1435.0,25.0
0.25,1.8,1.4,1435.2,26.0
...

[METADATA]
OPERATOR=JRæ±æ—¥æœ¬
SECTION=æ±äº¬-æ¨ªæµœ
```

#### 6.2.2 ãƒ‡ãƒ¼ã‚¿é …ç›®

- `distance`: è·é›¢ [m]
- `left`: å·¦ãƒ¬ãƒ¼ãƒ«å¤‰ä½ [mm]
- `right`: å³ãƒ¬ãƒ¼ãƒ«å¤‰ä½ [mm]
- `gauge`: è»Œé–“ [mm]
- `cant`: ã‚«ãƒ³ãƒˆ [mm]

#### 6.2.3 è§£æå®Ÿè£…

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:** `backend/src/parsers/kiya-parser.js`

### 6.3 è»Œé“ç’°å¢ƒãƒ‡ãƒ¼ã‚¿å½¢å¼

#### 6.3.1 ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

CSVå½¢å¼ã€ãƒ˜ãƒƒãƒ€ãƒ¼ä»˜ã:

```csv
distance,temperature,humidity,rainfall,track_condition
0.0,25.5,60,0,normal
0.5,25.6,61,0,normal
1.0,25.8,62,0,normal
```

#### 6.3.2 è§£æå®Ÿè£…

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:** `backend/src/parsers/track-environment-parser.js`

---

## 7. APIä»•æ§˜è©³ç´°

### 7.1 åŸºæœ¬API

#### 7.1.1 ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```http
GET /api/health
```

**Response:**
```json
{
  "status": "ok",
  "message": "Rail Track API is running"
}
```

#### 7.1.2 CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

```http
POST /api/upload
Content-Type: multipart/form-data
```

**Response:**
```json
{
  "success": true,
  "filename": "sample-data.csv",
  "dataPoints": 41,
  "data": [...],
  "statistics": {
    "min": 2.2,
    "max": 6.7,
    "avg": 4.15,
    "stdDev": 1.52
  }
}
```

### 7.2 åå¿ƒçŸ¢è¨ˆç®—API

#### 7.2.1 åå¿ƒçŸ¢è¨ˆç®—

```http
POST /api/eccentric-versine/calculate
Content-Type: application/json
```

**Request:**
```json
{
  "measurementData": [
    { "distance": 0, "value": 1.5 },
    { "distance": 0.25, "value": 1.8 }
  ],
  "p": 10,
  "q": 5,
  "samplingInterval": 0.25
}
```

**Response:**
```json
{
  "success": true,
  "versineData": [...],
  "parameters": { "p": 10, "q": 5, "samplingInterval": 0.25 },
  "statistics": { "min": -2.5, "max": 3.2, "mean": 0.15, "stdDev": 1.2 }
}
```

#### 7.2.2 æ¤œæ¸¬ç‰¹æ€§è¨ˆç®—

```http
POST /api/eccentric-versine/characteristics
```

**Request:**
```json
{
  "p": 10,
  "q": 5,
  "samplingInterval": 0.25,
  "wavelengthRange": { "min": 1, "max": 200, "step": 1 }
}
```

**Response:**
```json
{
  "success": true,
  "characteristics": [
    {
      "wavelength": 1,
      "A": 0.95,
      "B": 0.05,
      "amplitude": 0.951,
      "phase": 0.052,
      "phaseDeg": 3.0
    }
  ]
}
```

#### 7.2.3 åå¿ƒçŸ¢å¤‰æ›

```http
POST /api/eccentric-versine/convert
```

**Request:**
```json
{
  "sourceData": [...],
  "sourceParams": { "p": 10, "q": 5 },
  "targetParams": { "p": 5, "q": 5 },
  "samplingInterval": 0.25
}
```

**Response:**
```json
{
  "success": true,
  "convertedData": [...],
  "conversionCoefficients": { "alpha": 0.98, "beta": 0.02 }
}
```

#### 7.2.4 ä¸€æ‹¬ç‰¹æ€§è¨ˆç®—

```http
POST /api/eccentric-versine/batch-characteristics
```

**Request:**
```json
{
  "configurations": [
    { "p": 10, "q": 5, "label": "10-5måå¿ƒçŸ¢" },
    { "p": 5, "q": 5, "label": "5-5måå¿ƒçŸ¢" }
  ],
  "samplingInterval": 0.25,
  "wavelengthRange": { "min": 1, "max": 200, "step": 1 }
}
```

#### 7.2.5 çµ±è¨ˆæƒ…å ±å–å¾—

```http
POST /api/eccentric-versine/statistics
```

#### 7.2.6 Aä¿‚æ•°è¨ˆç®—

```http
POST /api/eccentric-versine/coefficient-a
```

#### 7.2.7 Bä¿‚æ•°è¨ˆç®—

```http
POST /api/eccentric-versine/coefficient-b
```

#### 7.2.8 æŒ¯å¹…ãƒ»ä½ç›¸è¨ˆç®—

```http
POST /api/eccentric-versine/amplitude-phase
```

### 7.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### 7.3.1 æ¨™æº–ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```json
{
  "success": false,
  "error": {
    "code": "INVALID_PARAMETER",
    "message": "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿pã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™",
    "details": {
      "parameter": "p",
      "value": -5,
      "constraint": "p > 0"
    }
  }
}
```

#### 7.3.2 ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§

| ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ | HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|--------|------|---------------|
| INVALID_PARAMETER | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ | 400 |
| MISSING_PARAMETER | å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸è¶³ | 400 |
| INVALID_FORMAT | ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¨ãƒ©ãƒ¼ | 400 |
| CALCULATION_ERROR | è¨ˆç®—å‡¦ç†ã‚¨ãƒ©ãƒ¼ | 500 |
| SERVER_ERROR | å†…éƒ¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ | 500 |
| FILE_TOO_LARGE | ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¶…é | 413 |

---

## 8. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä»•æ§˜

### 8.1 åå¿ƒçŸ¢è¨ˆç®—ãƒšãƒ¼ã‚¸

#### 8.1.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

**ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:** `EccentricVersinePage.tsx` (866è¡Œ)

**ã‚¿ãƒ–æ§‹æˆ:**
1. åå¿ƒçŸ¢è¨ˆç®—ã‚¿ãƒ–
2. æ¤œæ¸¬ç‰¹æ€§ã‚¿ãƒ–
3. åå¿ƒçŸ¢å¤‰æ›ã‚¿ãƒ–
4. ä¸€æ‹¬ç‰¹æ€§æ¯”è¼ƒã‚¿ãƒ–
5. ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ä»•æ§˜ã‚¿ãƒ–

#### 8.1.2 çŠ¶æ…‹ç®¡ç†

```typescript
interface EccentricVersinePageState {
  // ã‚¿ãƒ–åˆ¶å¾¡
  activeTab: number;

  // åå¿ƒçŸ¢è¨ˆç®—
  measurementData: MeasurementPoint[];
  versineParams: { p: number; q: number; samplingInterval: number };
  versineResult: VersineResult | null;

  // æ¤œæ¸¬ç‰¹æ€§
  characteristicsParams: CharacteristicsParams;
  characteristicsResult: Characteristic[] | null;

  // åå¿ƒçŸ¢å¤‰æ›
  conversionSource: MeasurementPoint[];
  conversionParams: ConversionParams;
  conversionResult: ConversionResult | null;

  // UIçŠ¶æ…‹
  loading: boolean;
  error: string | null;
}
```

### 8.2 ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 8.2.1 EccentricVersineChart

**ç”¨é€”:** åå¿ƒçŸ¢æ³¢å½¢ã®å¯è¦–åŒ–

**Props:**
```typescript
interface EccentricVersineChartProps {
  originalData?: MeasurementPoint[];
  versineData?: MeasurementPoint[];
  title?: string;
  showLegend?: boolean;
}
```

**å®Ÿè£…:** Plotly.jsä½¿ç”¨ã€2ç³»åˆ—è¡¨ç¤ºï¼ˆæ¸¬å®šå€¤ãƒ»åå¿ƒçŸ¢ï¼‰

#### 8.2.2 CharacteristicsChart

**ç”¨é€”:** æ¤œæ¸¬ç‰¹æ€§ã®å¯è¦–åŒ–

**Props:**
```typescript
interface CharacteristicsChartProps {
  characteristics: Characteristic[];
  showAmplitude?: boolean;
  showPhase?: boolean;
  title?: string;
}
```

**å®Ÿè£…:** ãƒ‡ãƒ¥ã‚¢ãƒ«ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆï¼ˆæŒ¯å¹…ãƒ»ä½ç›¸ï¼‰

#### 8.2.3 ConversionComparisonChart

**ç”¨é€”:** å¤‰æ›æ¯”è¼ƒã®å¯è¦–åŒ–

**Props:**
```typescript
interface ConversionComparisonChartProps {
  sourceData: MeasurementPoint[];
  convertedData: MeasurementPoint[];
  sourceLabel?: string;
  convertedLabel?: string;
  title?: string;
}
```

**å®Ÿè£…:** 3ç³»åˆ—è¡¨ç¤ºï¼ˆå¤‰æ›å…ƒãƒ»å¤‰æ›å¾Œãƒ»å·®åˆ†ï¼‰

---

## 9. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜

### 9.1 ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœ

æ¸¬å®šç’°å¢ƒ:
- CPU: Intel Core i7-10700 @ 2.9GHz
- RAM: 16GB
- Node.js: 20.10.0

#### 9.1.1 åå¿ƒçŸ¢è¨ˆç®—

| ãƒ‡ãƒ¼ã‚¿ç‚¹æ•° | å‡¦ç†æ™‚é–“ | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ |
|-----------|---------|------------|
| 1,000     | 2ms     | 0.5MB      |
| 10,000    | 15ms    | 2MB        |
| 100,000   | 120ms   | 15MB       |
| 1,000,000 | 1.2s    | 150MB      |

#### 9.1.2 æ¤œæ¸¬ç‰¹æ€§è¨ˆç®—

| æ³¢é•·ç‚¹æ•° | å‡¦ç†æ™‚é–“ | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ |
|---------|---------|------------|
| 10      | 0.5ms   | 0.1MB      |
| 100     | 3ms     | 0.5MB      |
| 200     | 5ms     | 1MB        |

### 9.2 æœ€é©åŒ–æ‰‹æ³•

#### 9.2.1 å®Ÿè£…æ¸ˆã¿æœ€é©åŒ–

- ãƒ«ãƒ¼ãƒ—æœ€é©åŒ–ï¼ˆä¸è¦ãªåå¾©å‰Šé™¤ï¼‰
- é…åˆ—ã®äº‹å‰å‰²ã‚Šå½“ã¦
- ä¸è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆã®å‰Šæ¸›
- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³é–¢æ•°ã®ä½¿ç”¨

#### 9.2.2 å°†æ¥ã®æœ€é©åŒ–æ¡ˆ

- Worker Threadsã«ã‚ˆã‚‹ä¸¦åˆ—å‡¦ç†
- WebAssemblyã«ã‚ˆã‚‹é«˜é€ŸåŒ–
- ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†
- çµæœã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°

---

## 10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜

### 10.1 å…¥åŠ›æ¤œè¨¼

```javascript
function validateVersineParams(p, q, samplingInterval) {
  if (typeof p !== 'number' || p <= 0) {
    throw new Error('å¼¦é•·pã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
  if (typeof q !== 'number' || q <= 0) {
    throw new Error('å¼¦é•·qã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
  if (typeof samplingInterval !== 'number' || samplingInterval <= 0) {
    throw new Error('ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°é–“éš”ã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
}
```

### 10.2 ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

```javascript
const upload = multer({
  storage: storage,
  limits: {
    fileSize: 10 * 1024 * 1024 // 10MB
  },
  fileFilter: (req, file, cb) => {
    const allowedTypes = ['text/csv', 'application/octet-stream'];
    const allowedExtensions = ['.csv', '.rsq'];

    const ext = path.extname(file.originalname).toLowerCase();

    if (allowedTypes.includes(file.mimetype) || allowedExtensions.includes(ext)) {
      cb(null, true);
    } else {
      cb(new Error('è¨±å¯ã•ã‚Œã¦ã„ãªã„ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™'));
    }
  }
});
```

### 10.3 CORSè¨­å®š

```javascript
const corsOptions = {
  origin: ['http://localhost:3000', 'http://localhost:5173'],
  methods: ['GET', 'POST'],
  allowedHeaders: ['Content-Type'],
  credentials: true
};

app.use(cors(corsOptions));
```

---

## 11. ãƒ†ã‚¹ãƒˆä»•æ§˜

### 11.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

```javascript
describe('EccentricVersine', () => {
  describe('calculate', () => {
    test('æ­£å¸¸ç³»: åŸºæœ¬è¨ˆç®—', () => {
      const calc = new EccentricVersine({ samplingInterval: 0.25 });
      const data = generateTestData(100);
      const result = calc.calculate(data, 10, 5);

      expect(result.versineData).toBeDefined();
      expect(result.versineData.length).toBe(data.length);
    });

    test('ç•°å¸¸ç³»: ä¸æ­£ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿', () => {
      const calc = new EccentricVersine({ samplingInterval: 0.25 });
      expect(() => calc.calculate([], -10, 5)).toThrow();
    });
  });

  describe('calculateCharacteristics', () => {
    test('æ­£å¸¸ç³»: ç‰¹æ€§è¨ˆç®—', () => {
      const calc = new EccentricVersine({ samplingInterval: 0.25 });
      const result = calc.calculateCharacteristics(10, 5, {
        min: 1,
        max: 200,
        step: 1
      });

      expect(result.length).toBe(200);
      expect(result[0]).toHaveProperty('A');
      expect(result[0]).toHaveProperty('B');
      expect(result[0]).toHaveProperty('amplitude');
      expect(result[0]).toHaveProperty('phase');
    });
  });
});
```

### 11.2 çµ±åˆãƒ†ã‚¹ãƒˆ

```javascript
describe('Eccentric Versine API', () => {
  test('POST /api/eccentric-versine/calculate', async () => {
    const response = await request(app)
      .post('/api/eccentric-versine/calculate')
      .send({
        measurementData: generateTestData(100),
        p: 10,
        q: 5,
        samplingInterval: 0.25
      });

    expect(response.status).toBe(200);
    expect(response.body.success).toBe(true);
    expect(response.body.versineData).toBeDefined();
  });
});
```

---

## 12. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### 12.1 é–‹ç™ºç’°å¢ƒ

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
cd backend
npm install
npm run dev  # ãƒãƒ¼ãƒˆ5000ã§èµ·å‹•

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
cd frontend
npm install
npm run dev  # ãƒãƒ¼ãƒˆ3000ã§èµ·å‹•
```

### 12.2 æœ¬ç•ªç’°å¢ƒ

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
cd frontend
npm run build

# PM2ã§ãƒ‡ãƒ—ãƒ­ã‚¤
pm2 start ecosystem.config.js
```

**ecosystem.config.js:**
```javascript
module.exports = {
  apps: [
    {
      name: 'rail-track-api',
      script: './backend/src/api-server.js',
      instances: 'max',
      exec_mode: 'cluster',
      env: {
        NODE_ENV: 'production',
        PORT: 5000
      }
    }
  ]
};
```

---

**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 1.0.0
**ä½œæˆæ—¥:** 2025å¹´
**ä½œæˆè€…:** Rail Track Restoration System Development Team
